<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PoliPlay — Реакшн тест</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Inter', sans-serif; background:#0a0a0a; color:#fff; display:flex; flex-direction:column; align-items:center; min-height:100vh; margin:0; justify-content:flex-start;}
header { width:100%; padding:20px; text-align:center; font-size:2rem; backdrop-filter:blur(10px); background:rgba(20,20,20,0.4); border-bottom:1px solid rgba(255,255,255,0.1); margin-bottom:20px;}
header img.logo { height:40px; vertical-align:middle; margin-right:10px; }
nav { margin-top:10px; display:flex; justify-content:center; gap:20px; flex-wrap:wrap; }
nav a { padding:6px 15px; border-radius:25px; background: rgba(255,255,255,0.05); transition:0.3s; color:#fff; text-decoration:none; }
nav a:hover { background: linear-gradient(90deg, #00ffff, #a100ff); box-shadow:0 0 10px #00ffff,0 0 20px #a100ff; }

.controls { display:flex; gap:10px; margin-bottom:20px; flex-wrap:wrap; justify-content:center; }
.controls button, .controls select { cursor:pointer; background: rgba(255,255,255,0.05); padding:6px 12px; border-radius:15px; transition:0.3s; border:none; color:#fff; font-weight:500; font-size:0.95rem; }
.controls button:hover, .controls select:hover { background: linear-gradient(90deg,#00ffff,#a100ff); color:#000; }

#game-area { position:relative; width:90vw; max-width:600px; height:60vh; border:2px solid rgba(255,255,255,0.1); display:flex; justify-content:center; align-items:center; background: rgba(255,255,255,0.02); border-radius:15px; }

#target { width:100px; height:100px; background:#ff0000; border-radius:10px; cursor:pointer; opacity:1; transition:opacity 0.3s, background 0.2s; position:absolute; }

#scoreboard { margin-top:15px; font-size:1.5rem; }

@media(max-width:500px){
  #target{width:70px;height:70px;}
  #game-area{height:40vh;}
}
</style>
</head>
<body>

<header>
  <img src="../icons/logo.png" alt="PoliPlay Logo" class="logo">
  PoliPlay — Реакшн тест
  <nav>
    <a href="../index.html">Головна</a>
    <a href="../all-games.html">Усі ігри</a>
    <a href="../rating.html">Рейтинг</a>
    <a href="../about.html">Про сайт</a>
  </nav>
</header>

<div class="controls">
  <button onclick="showRules()">Правила</button>
  <button onclick="startGame()">Почати знову</button>
  <button onclick="exitGame()">Вийти</button>
  <select id="difficulty" onchange="changeDifficulty()">
    <option value="easy" selected>Легкий</option>
    <option value="medium">Середній</option>
    <option value="hard">Важкий</option>
  </select>
</div>

<div id="game-area">
  <div id="target"></div>
</div>

<div id="scoreboard">Очки: 0 | Час: 30</div>

<script>
const target = document.getElementById('target');
const area = document.getElementById('game-area');
const scoreEl = document.getElementById('scoreboard');
const difficultySelect = document.getElementById('difficulty');

let score = 0;
let time = 30;
let timer;
let isGreen = false;
let difficulty = 'easy';

const speeds = {
  easy: [1500,3000],
  medium: [1000,2000],
  hard: [500,1200]
};

function randomPosition(){
  const maxX = area.clientWidth - target.offsetWidth;
  const maxY = area.clientHeight - target.offsetHeight;
  const x = Math.random()*maxX;
  const y = Math.random()*maxY;
  target.style.left = x+'px';
  target.style.top = y+'px';
}

function showGreen(){
  target.style.opacity = 1;
  target.style.background = '#00ff00';
  isGreen = true;
}

function hideTarget(){
  target.style.opacity = 0;
  isGreen = false;
}

function changeColor(){
  randomPosition();
  hideTarget();
  target.style.background = '#ff0000';
  isGreen = false;

  const [min, max] = speeds[difficulty];
  const delay = Math.random()*(max-min)+min;

  setTimeout(()=>{ 
    showGreen();
    setTimeout(()=>{ 
      hideTarget(); 
      setTimeout(changeColor, 300);
    }, 1000); 
  }, delay);
}

target.addEventListener('click',()=>{ 
  if(isGreen){ score++; } 
  else { score--; if(score<0){ clearInterval(timer); alert("Програв! Очки < 0"); return; } }
  scoreEl.textContent=`Очки: ${score} | Час: ${time}`;
});

function updateTimer(){
  time--;
  scoreEl.textContent=`Очки: ${score} | Час: ${time}`;
  if(time<=0){
    clearInterval(timer);
    alert(`Час вичерпано! Ви набрали ${score} очок.`);
  }
}

function startGame(){
  score=0;
  time=30;
  scoreEl.textContent=`Очки: ${score} | Час: ${time}`;
  clearInterval(timer);
  timer=setInterval(updateTimer,1000);
  changeColor();
}

function showRules(){
  alert("Мета: клікати на квадрат тільки коли він зелений.\n- Легкий: зелений з'являється довше\n- Середній: трохи швидше\n- Важкий: швидко\n\nЯкщо натиснути червоний — віднімаються очки. Якщо очки < 0 — ви програли.\nКвадрат плавно з'являється і зникає.");
}

function exitGame(){
  if(confirm("Ви точно хочете вийти?")) window.location.href="../index.html";
}

function changeDifficulty(){
  difficulty = difficultySelect.value;
}

startGame();
</script>

</body>
</html>