<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PoliPlay ‚Äî –•—Ä–µ—Å—Ç–∏–∫–∏-–Ω—É–ª–∏–∫–∏</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
  font-family:'Inter', sans-serif; background:#0a0a0a; color:#fff;
  display:flex; flex-direction:column; align-items:center;
  min-height:100vh; margin:0; padding:0;
}
header { width:100%; padding:15px 10px; text-align:center; font-size:1.6rem;
  backdrop-filter:blur(10px); background:rgba(20,20,20,0.5);
  border-bottom:1px solid rgba(255,255,255,0.1); margin-bottom:15px;
}
header img.logo { height:30px; vertical-align:middle; margin-right:8px; }
nav { margin-top:8px; display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
nav a { padding:4px 10px; border-radius:20px; background: rgba(255,255,255,0.05);
  transition:0.3s; color:#fff; text-decoration:none; font-size:0.9rem;}
nav a:hover { background: linear-gradient(90deg, #00ffff, #a100ff); box-shadow:0 0 6px #00ffff,0 0 12px #a100ff; }

h2{text-align:center;margin:12px 0;}
.status {margin-bottom:10px; font-weight:600;}
.scoreboard {display:flex; gap:15px; margin-bottom:15px;}
.scoreboard div {background:rgba(255,255,255,0.05); padding:6px 12px; border-radius:12px;}

.board-container { display:grid; grid-template-columns: repeat(3,80px); grid-template-rows: repeat(3,80px);
  gap:6px; margin-bottom:15px; background: rgba(255,255,255,0.05);
  backdrop-filter: blur(8px); padding:10px; border-radius:12px; touch-action: manipulation;
}
.cell { background: rgba(255,255,255,0.05); display:flex; justify-content:center;
  align-items:center; font-size:2.2rem; font-weight:bold; cursor:pointer;
  border-radius:8px; transition:0.2s; user-select:none; }
.cell:hover{ box-shadow:0 0 6px #00ffff,0 0 12px #a100ff; transform:translateY(-1px);}

.controls { display:flex; gap:10px; margin-bottom:15px; flex-wrap:wrap; justify-content:center; }
.controls button { padding:8px 16px; border-radius:20px; border:none;
  background:linear-gradient(90deg,#00ffff,#a100ff); color:#000; font-weight:600;
  cursor:pointer; transition:0.2s; font-size:0.9rem;}
.controls button:hover { box-shadow:0 0 6px #00ffff,0 0 12px #a100ff; }
select { padding:6px 10px; border-radius:12px; background:rgba(255,255,255,0.05);
  color:#fff; border:none; cursor:pointer; font-size:0.9rem; }

/* –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ */
.modal {position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.7); display:none; align-items:center; justify-content:center;}
.modal-content {background:#111; padding:20px; border-radius:16px; text-align:center;
  box-shadow:0 0 12px #00ffff,0 0 20px #a100ff;}
.modal-content h3 {margin-bottom:15px;}
.modal-content button {margin-top:10px;}

@media(max-width:480px){
  .board-container{grid-template-columns:repeat(3,60px); grid-template-rows:repeat(3,60px);}
  .cell{font-size:1.6rem;}
  header{font-size:1.4rem; padding:10px 5px;}
  nav a{font-size:0.8rem; padding:3px 8px;}
  .controls button, select{font-size:0.8rem; padding:5px 10px;}
}
</style>
</head>
<body>

<header>
  <img src="../icons/logo.png" alt="PoliPlay Logo" class="logo">
  PoliPlay ‚Äî –•—Ä–µ—Å—Ç–∏–∫–∏-–Ω—É–ª–∏–∫–∏
  <nav>
    <a href="../index.html">–ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="../all-games.html">–£—Å—ñ —ñ–≥—Ä–∏</a>
    <a href="../rating.html">–†–µ–π—Ç–∏–Ω–≥</a>
    <a href="../about.html">–ü—Ä–æ —Å–∞–π—Ç</a>
  </nav>
</header>

<h2>–•—Ä–µ—Å—Ç–∏–∫–∏-–Ω—É–ª–∏–∫–∏</h2>
<div class="status" id="status">–¢–≤—ñ–π —Ö—ñ–¥ ‚ùå</div>
<div class="scoreboard">
  <div>–¢–≤–æ—ó –ø–µ—Ä–µ–º–æ–≥–∏: <span id="wins">0</span></div>
  <div>–ü–æ—Ä–∞–∑–∫–∏: <span id="losses">0</span></div>
  <div>–ù—ñ—á–∏—ó: <span id="draws">0</span></div>
</div>

<div class="controls">
  <label>–†—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ: 
    <select id="difficulty">
      <option value="easy">–õ–µ–≥–∫–∏–π</option>
      <option value="medium">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
      <option value="hard">–í–∞–∂–∫–∏–π</option>
    </select>
  </label>
</div>

<div class="board-container" id="board"></div>

<div class="controls">
  <button onclick="showRules()">–ü—Ä–∞–≤–∏–ª–∞</button>
  <button onclick="resetGame()">–ü–æ—á–∞—Ç–∏ –∑–Ω–æ–≤—É</button>
  <button onclick="window.location.href='../index.html'">–í–∏–π—Ç–∏</button>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ -->
<div class="modal" id="modal">
  <div class="modal-content">
    <h3 id="modal-message"></h3>
    <button onclick="closeModal()">–ó–∞–∫—Ä–∏—Ç–∏</button>
    <button onclick="resetGame()">–ó—ñ–≥—Ä–∞—Ç–∏ —â–µ —Ä–∞–∑</button>
  </div>
</div>

<script>
const board = document.getElementById('board');
let cells = []; let moves = 0; let difficulty = 'easy';
const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

let winCount=0, lossCount=0, drawCount=0;

const statusText=document.getElementById('status');
const modal=document.getElementById('modal');
const modalMsg=document.getElementById('modal-message');

function showModal(msg){ modalMsg.textContent=msg; modal.style.display='flex'; }
function closeModal(){ modal.style.display='none'; }

document.getElementById('difficulty').addEventListener('change',(e)=>{difficulty=e.target.value;});

function createBoard(){
  board.innerHTML=''; cells=[]; moves=0;
  statusText.textContent="–¢–≤—ñ–π —Ö—ñ–¥ ‚ùå";
  for(let i=0;i<9;i++){
    const cell=document.createElement('div');
    cell.classList.add('cell');
    cell.addEventListener('click',()=>playerMove(i),{once:true});
    board.appendChild(cell); cells.push(cell);
  }
}

function playerMove(i){
  if(cells[i].textContent!=='') return;
  cells[i].textContent='‚ùå'; moves++;
  if(checkWin('‚ùå')) { winCount++; updateScore(); showModal('üéâ –¢–∏ –≤–∏–≥—Ä–∞–≤!'); return; }
  if(moves>=9){ drawCount++; updateScore(); showModal('ü§ù –ù—ñ—á–∏—è!'); return; }
  statusText.textContent="–•—ñ–¥ –±–æ—Ç–∞ ‚≠ï";
  setTimeout(botMove, 400);
}

function botMove(){
  let choice;
  if(difficulty==='easy'){ choice = randomMove(); }
  else if(difficulty==='medium'){ choice = Math.random()<0.7 ? mediumMove() : randomMove(); }
  else{ choice = minimaxMove(); }
  cells[choice].textContent='‚≠ï'; moves++;
  if(checkWin('‚≠ï')){ lossCount++; updateScore(); showModal('üíÄ –ë–æ—Ç –≤–∏–≥—Ä–∞–≤!'); return; }
  if(moves>=9){ drawCount++; updateScore(); showModal('ü§ù –ù—ñ—á–∏—è!'); return; }
  statusText.textContent="–¢–≤—ñ–π —Ö—ñ–¥ ‚ùå";
}

function randomMove(){ return cells.map((c,i)=>c.textContent===''?i:null).filter(v=>v!==null)[Math.floor(Math.random()*cells.filter(c=>c.textContent==='').length)]; }

function mediumMove(){ let block = checkPotentialWin('‚ùå'); if(block!==null) return block; let win = checkPotentialWin('‚≠ï'); if(win!==null) return win; return randomMove(); }

function checkPotentialWin(player){
  for(let combo of wins){ let vals = combo.map(i=>cells[i].textContent);
    if(vals.filter(v=>v===player).length===2 && vals.includes('')) return combo[vals.indexOf('')];
  }
  return null;
}

function checkWin(player){ return wins.some(combo => combo.every(i=>cells[i].textContent===player)); }

function minimaxMove(){
  let bestScore=-Infinity, move;
  for(let i=0;i<9;i++){ 
    if(cells[i].textContent===''){ 
      cells[i].textContent='‚≠ï'; 
      let score=minimax(false); 
      cells[i].textContent=''; 
      if(score>bestScore){ bestScore=score; move=i; }
    }
  }
  return move;
}

function minimax(isMax){
  if(checkWin('‚≠ï')) return 1;
  if(checkWin('‚ùå')) return -1;
  if(cells.every(c=>c.textContent!=='')) return 0;
  if(isMax){
    let best=-Infinity;
    for(let i=0;i<9;i++){ if(cells[i].textContent===''){ cells[i].textContent='‚≠ï'; best=Math.max(best,minimax(false)); cells[i].textContent=''; } }
    return best;
  } else{
    let best=Infinity;
    for(let i=0;i<9;i++){ if(cells[i].textContent===''){ cells[i].textContent='‚ùå'; best=Math.min(best,minimax(true)); cells[i].textContent=''; } }
    return best;
  }
}

function resetGame(){ closeModal(); createBoard(); }

function showRules(){
  showModal("–ú–µ—Ç–∞: —Å–∫–ª–∞—Å—Ç–∏ —Ä—è–¥, —Å—Ç–æ–≤–ø–µ—Ü—å –∞–±–æ –¥—ñ–∞–≥–æ–Ω–∞–ª—å ‚ùå —á–∏ ‚≠ï.\n–¢–∏ —Ö–æ–¥–∏—à –ø–µ—Ä—à–∏–º ‚ùå, –±–æ—Ç ‚Äî ‚≠ï.\n–°–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ:\n–õ–µ–≥–∫–∏–π ‚Äî –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –±–æ—Ç\n–°–µ—Ä–µ–¥–Ω—ñ–π ‚Äî –±–ª–æ–∫—É—î —ñ –≤–∏–≥—Ä–∞—î –∫–æ–ª–∏ –º–æ–∂–µ\n–í–∞–∂–∫–∏–π ‚Äî –±–æ—Ç –≥—Ä–∞—î —ñ–¥–µ–∞–ª—å–Ω–æ.");
}

function updateScore(){
  document.getElementById('wins').textContent=winCount;
  document.getElementById('losses').textContent=lossCount;
  document.getElementById('draws').textContent=drawCount;
}

createBoard();
</script>

</body>
</html>
